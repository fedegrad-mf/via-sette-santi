---
/**
 * TrailCard Component
 * Displays a trail with its basic information
 */

import { toWebP } from '../utils/image';

interface Props {
  number: number;
  title: string;
  description: string;
  distance: string;
  duration: string;
  difficulty: 'easy' | 'moderate' | 'hard';
  image?: string;
  link: string;
  translations: {
    distance: string;
    duration: string;
    difficulty: string;
    viewDetails: string;
    difficultyLabel: string;
    stageLabel: string;
  };
}

const { number, title, description, distance, duration, difficulty, image, link, translations } = Astro.props;
---

<article class="card">
  {image && (
    <div class="card-image">
      <picture>
        <source 
          srcset={`${import.meta.env.BASE_URL}images/trails/${toWebP(image)}`} 
          type="image/webp" 
        />
        <img 
          src={`${import.meta.env.BASE_URL}images/trails/${image}`} 
          alt={title} 
          loading="lazy"
          decoding="async"
          width="800"
          height="600"
        />
      </picture>
      <div class="card-image-overlay">
        <div class="trail-number-display">
          <div class="trail-number-large">{number}</div>
          <div class="trail-number-label">{translations.stageLabel.replace('{0}', String(number))}</div>
        </div>
      </div>
    </div>
  )}
  <div class="card-content">
    <h3 class="card-title">{title}</h3>
    <p class="card-description">{description}</p>
    
    <div class="info-row">
      <span class="info-row-item">
        <svg class="card-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
        </svg>
        {distance}
      </span>
      <span class="info-row-item">
        <svg class="card-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
        {duration}
      </span>
    </div>

    <div class="card-footer">
      <span class="card-badge badge-{difficulty}">
        {translations.difficultyLabel}
      </span>
      <a href={link} class="card-link">
        {translations.viewDetails}
        <svg class="card-link-arrow" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </a>
    </div>
  </div>
</article>

<style>
  /* Trail-specific styles only */
  .trail-number-display {
    text-align: center;
    color: white;
  }

  .trail-number-large {
    font-size: 3.75rem;
    font-weight: 700;
    line-height: 1;
    margin-bottom: 0.5rem;
  }

  .trail-number-label {
    font-size: 0.875rem;
    opacity: 0.9;
  }
</style>
